<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="global.sesoc.Youtube.dao.MemberMapper">
	<select id="selectOneFromMember" parameterType="Member" resultType="Member">
		select
			useremail, usernick, userpwd, gender
			, to_char(birth, 'YYYY-MM-DD') birth
			, to_char(joinDate, 'YYYY-MM-DD') joinDate
			, to_char(lastAccess, 'YYYY-MM-DD') lastAccess
			, point, warningCount, admin, status
		from
			member
		where
			useremail=#{useremail}
		<if test="userpwd != null">
		and
			userpwd=#{userpwd}
		</if>
	</select>
	
	<select id="selectByNick" parameterType="string" resultType="Member">
		select
			useremail, usernick, userpwd, gender
			, to_char(birth, 'YYYY-MM-DD') birth
			, to_char(joinDate, 'YYYY-MM-DD') joinDate
			, to_char(lastAccess, 'YYYY-MM-DD') lastAccess
			, point, warningCount, admin, status
		from
			member
		where usernick = #{usernick}
	</select>
	
	
	<insert id = "insertMember" parameterType="Member">
		insert into member (useremail, usernick, userpwd, gender, birth)
		values(#{useremail}, #{usernick}, #{userpwd}, #{gender} , #{birth})
	</insert>
	
	<update id="updateStatus" parameterType="string">
		update member
		set status = 1
		where useremail=#{useremail}
	</update>
	

	<update id="updateLastAccess" parameterType="string">
		update member
		set lastAccess = sysdate
		where useremail=#{useremail}
	</update>
	
	<!-- 회원정보 수정 -->
	<!-- <update id="updateMember" parameterType="Member">
		update member 
		set 
			usernick = #{usernick} 
			, userpwd = #{userpwd} 
		where 
			useremail = #{useremail}
	</update> -->
	
	<!-- 회원정보 수정 -->
	<update id="updateMember" parameterType="map" >
	update member
	set
		userpwd = #{newpwd}
		, usernick = #{usernick}
	where
		userpwd = #{currpwd} and useremail = #{useremail}
	</update>
</mapper>