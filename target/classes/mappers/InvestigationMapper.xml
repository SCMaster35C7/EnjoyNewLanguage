<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="global.sesoc.Youtube.dao.InvestigationMapper">
	<select resultType="int" parameterType="map" id="getTotalCount">
		select
			count(*)
		from
			investigation
		where
			${searchType} like '%' || #{searchWord} || '%' 
	</select>

	<select resultType="Investigation" parameterType="map" id="selectInvList">
		select
			investigationnum
			, url
			, title
			, content
			, useremail
			, to_char(regdate, 'YYYY-MM-DD') regdate
			, hitcount
			, recommendation
			, decommendation
		from
			investigation
		where
			${searchType} like '%' || #{searchWord} || '%'
	</select>
	
	<insert parameterType="Investigation" id="insertInvestigation">
		insert into investigation (
			investigationnum
			, url
			, title
			, content
			, useremail
		)values(
			INVESTIGATION_SEQ.nextval
			, #{url}
			, #{title}
			, #{content
			, jdbcType=VARCHAR}
			, #{useremail}
		) 
	</insert>
	
	<select resultType="Investigation" parameterType="Investigation" id="selectOneFromInvUseURL">
		select
			investigationnum
			, url
			, title
			, content
			, useremail
			, to_char(regdate, 'YYYY-MM-DD') regdate
			, hitcount
			, recommendation
			, decommendation
		from
			investigation
		where
			url = #{url} 
	</select>
	
	<select resultType="Investigation" parameterType="int" id="selectOneFromInvUseNum">
		select
			investigationnum
			, url
			, title
			, content
			, useremail
			, to_char(regdate, 'YYYY-MM-DD') regdate
			, hitcount
			, recommendation
			, decommendation
		from
			investigation
		where
			investigationnum = #{investigationnum} 
	</select>
	
	<update parameterType="int" id="updateHitCount">
		update
			investigation
		set
			hitcount = hitcount+1
		where
			investigationnum = #{investigationnum}
	</update>
</mapper>